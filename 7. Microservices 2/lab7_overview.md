### Микросервисы №2
# Лабораторная работа N 7
### Задание к выполнению лабораторной работы.

В этой лабораторной работе нужно реализовать потоковую версию запроса `GetRegions()` - `GetRegionsStream()`.  
В протоколе этот запрос уже есть, но "фабрика реакторов" `GeoServiceImpl` возвращает пустой реактор в ответ на этот запрос.

### Требования к результату

`GetRegionsStream()` должен возвращать поток ответов `RegionsResponse`.
Каждый ответ должен содержать регионы, найденные в пределах одного участка карты.

Исходная область поиска (квадрат со стороной `2 * RegionsRequest.distance_km` и центром в указанных координатах) должна быть разделена на прямоугольные участки.
Размер каждого участка определяется конфигурационными параметрами maxBoxWidth и maxBoxHeight.

Участки должны обрабатываться последовательно.
Ответы должны отправляться клиенту по мере готовности данных.

Все найденные регионы должны быть включены в ответы.
Порядок обработки участков не влияет на конечный результат.

### Пример

Вот как мог бы выглядеть диагностический вывод запроса и ответов:

```
2025-08-07 13:47:06.381419 Выполняем запрос:
position {
  latitude: 55.991893
  longitude: 37.21439
}
distance_km: 250
prefs {
  mask: 1
}

2025-08-07 13:47:12.186776 Получен фрагмент ответа:
regions {
  name: "Московская область"
  name_en: "Moscow Oblast"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 55.5043158
    longitude: 38.0353929
  }
}
regions {
  name: "Москва"
  name_en: "Moscow"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 55.625578
    longitude: 37.6063916
  }
}

2025-08-07 13:47:20.151137 Получен фрагмент ответа:
regions {
  name: "Ярославская область"
  name_en: "Yaroslavl Oblast"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 57.7781976
    longitude: 39.0021095
  }
}

2025-08-07 13:47:23.666652 Запрос выполнен.
```

Обратите внимание, что при выполнении данного примера maxBoxWidth и maxBoxHeight имели значение равное 1, что позволило разбить небольшую область поиска на несколько участков.

Если использовать значения maxBoxWidth и maxBoxHeight равные 10 (по умолчанию), то диагностический вывод выглядит так:

```
2025-08-07 13:58:22.041997 Выполняем запрос:
position {
  latitude: 55.991893
  longitude: 37.21439
}
distance_km: 250
prefs {
  mask: 1
}

2025-08-07 13:58:23.890513 Получен фрагмент ответа:
regions {
  name: "Московская область"
  name_en: "Moscow Oblast"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 55.5043158
    longitude: 38.0353929
  }
}
regions {
  name: "Ярославская область"
  name_en: "Yaroslavl Oblast"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 57.7781976
    longitude: 39.0021095
  }
}
regions {
  name: "Москва"
  name_en: "Moscow"
  country: "Россия"
  country_en: "Russia"
  center {
    latitude: 55.625578
    longitude: 37.6063916
  }
}

2025-08-07 13:58:23.890800 Запрос выполнен.
```

### Советы по реализации

Вам нужно реализовать только сам реактор.
Нужно использовать уже имеющиеся в коде утилитные функции разбивки области на участки, а также функции поиска регионов.
Обратите внимание на `ISearchEngine::StartFindRegions()`.

Для чтения конфигурации используйте класс `Configuration`.

Ознакомьтесь с [документацией](https://grpc.io/docs/languages/cpp/callback/) прежде, чем приступать к реализации.
